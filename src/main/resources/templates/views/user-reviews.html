<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="views/master">

<body>
	<div layout:fragment="page-content">

		<div class="container-fluid">
			<!-- BEGIN PAGE CONTENT-->

			<div class="row-fluid errmsg" runat="server" id="dvError"
				visible="false">
				<div style="width: 100%; text-align: center;">
					<div class="message success">
						<p th:text="${message}"></p>
					</div>
				</div>
			</div>

			<div class="row-fluid">
				<div class="span12">
					<!-- BEGIN SAMPLE FORM PORTLET-->
					<div class="portlet box blue tabbable">
						<div class="portlet-title">
							<h4>
								<i class="icon-reorder"></i><span class="hidden-480">User
									Reviews</span>&nbsp;
							</h4>
						</div>
						<div class="portlet-body form">
							<div class="tabbable portlet-tabs">
								<ul class="nav nav-tabs">&nbsp;
								</ul>
								<div class="tab-content">
									<div class="tab-pane active" id="portlet_tab1">
										<!-- BEGIN FORM-->

										<form class="form-horizontal" action="#"
											th:action="@{/review/userReviews/searchReviews}"
											th:object="${reviewFilterDTO}" method="get">


											<div class="control-group"></div>

											<div class="row-fluid">
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> First Name</label>
														<div class="controls">

															<input th:field="*{firstName}" class="m-wrap large"
																style="height: 30px" placeholder="Search by First Name" />

														</div>
													</div>
												</div>
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Email</label>
														<div class="controls">

															<input th:field="*{email}" style="height: 30px"
																ID="txtEmail" runat="server" class="m-wrap large"
																placeholder="Search by Email" />

														</div>
													</div>
												</div>
											</div>

											<div class="row-fluid">
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Company</label>
														<div class="controls">


															<select th:field="*{company}" class="m-wrap large">
																<option value="" selected>--Select Company--</option>
																<option th:each="company : ${companies}"
																	th:value="${company.get('name')}"
																	th:text="${company.get('name')}"></option>

															</select>

														</div>
													</div>
												</div>
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Location</label>
														<div class="controls">

															<select th:field="*{location}" class="m-wrap large">
																<option value="" selected>--Select Location--</option>
																<option th:each="location : ${locations}"
																	th:value="${location}" th:text="${location}"></option>

															</select>

														</div>
													</div>
												</div>



											</div>

											<div class="row-fluid">

												<div class="span6">

													<div class="control-group">
														<label class="control-label"> Country</label>
														<div class="controls">

															<select th:field="*{country}" class="m-wrap large">

																<option value="" selected>--Select Country--</option>
																<option th:each="country : ${countries}"
																	th:value="${country}" th:text="${country}"></option>

															</select>
														</div>
													</div>
												</div>



												<div class="span6">

													<div class="control-group">
														<label class="control-label"> Category</label>
														<div class="controls">

															<select th:field="*{category}" class="m-wrap large">

																<option value="" selected>--Select Category--</option>
																<option th:each="category : ${categories}"
																	th:value="${category.get('category')}"
																	th:text="${category.get('category')}"></option>

															</select>
														</div>
													</div>
												</div>
											</div>
											<div class="row-fluid">
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Rating</label>
														<div class="controls">

															<select th:field="*{ratingCriteria}" class="m-wrap large">
																<option value="" selected>--Select Rating--</option>
																<option value=">=1">>=1</option>
																<option value=">=2">>=2</option>
																<option value=">=3">>=3</option>
																<option value=">=4">>=4</option>
																<option value=">=5">>=5</option>
																<option value=">=6">>=6</option>
																<option value=">=7">>=7</option>
																<option value=">=8">>=8</option>
																<option value=">=9">>=9</option>
																<option value=">=10">>=10</option>
															</select>
															<!-- <label th:if="${#fields.hasErrors('influenceIds')}" th:class="'error'" class="col-lg-4 control-label" style="color:red;">Influences should not be empty.</label> -->

														</div>
													</div>
												</div>

												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Review</label>
														<div class="controls">

															<input th:field="*{review}" style="height: 30px"
																ID="txtEmail" runat="server" class="m-wrap large"
																placeholder="Search by Review" />

														</div>
													</div>
												</div>

											</div>




											<!-- 										<div class="row-fluid">
											<div class="span6">
												<div class="control-group">
													<label class="control-label"> Date From</label>
													<div class="controls">

														<input placeholder="Date From" style="height: 30px"
															ID="txtDateFrom" ClientIDMode="Static" runat="server"
															class="m-wrap m-ctrl-medium datepicker" />

													</div>
												</div>
											</div>
											<div class="span6">
												<div class="control-group">
													<label class="control-label"> Date To</label>
													<div class="controls">

														<input placeholder="Date To" style="height: 30px"
															ID="txtDateTo" ClientIDMode="Static" runat="server"
															class="m-wrap m-ctrl-medium datepicker" />

													</div>
												</div>
											</div>
										</div> -->



											<div class="form-actions">

												<button ID="btnsubmit" Text="Process"
													class="btn blue okMark" runat="server"
													OnClick="btnsubmit_Click"
													OnClientClick="return ValidData()" TabIndex="5">Process</button>

												<a th:href="@{/review/userReviews}"><button
														type="button" class="btn cancel">Clear</button></a>
														
														 <a
													th:href="@{/review/report/?type=xsl}">
													<button type="button" class="btn green">Export To
														Excel</button>
												</a>
												
												
												<button ID="btnExportToPDF" class="btn red">Export
													To PDF</button>


											</div>
										</form>
										<!-- END FORM-->
										<br />

										<form class="form-horizontal"
											th:action="@{/review/userReviews/sortReviews}"
											th:object="${reviewSortDTO}" method="POST">

											<select th:field="*{ratingOrder}" class="m-wrap medium">
												<option th:value="${''}" selected="selected">---Select
													Rating Order---</option>

												<option th:value="Ascending" th:text="Ascending"></option>
												<option th:value="Descending" th:text="Descending"></option>

											</select>

											<!-- <select th:field="*{dateOrder}" class="m-wrap medium">
											<option th:value="${''}" selected="selected">---Select
												Date Order---</option>

											<option th:value="Ascending" th:text="Ascending"></option>
											<option th:value="Descending" th:text="Descending"></option>

										</select>
 -->
											<button class="btn ">
												<img style="height: 20px; width: 30px;" alt="Sort"
													th:src="@{/images/sorticon.png}" /> Sort
											</button>
											<a th:href="@{/review/userReviews}"><button type="button"
													style="width: 100px; height: 36px" class="btn cancel">Clear</button></a>
										</form>
										<div>&nbsp;</div>
										<div style="overflow: auto; cursor: -moz-grab;">



											<!-- Here goes the table -->

											<table style="width: 100%"
												class="table table-striped table-hover table-bordered">

												<thead>
													<tr>
														<th>First Name</th>
														<th>Email</th>
														<th>Company</th>
														<th>Logo</th>
														<th>Location</th>
														<th>Country</th>
														<th>Categories</th>
														<th>Rating</th>
														<th>Review</th>
														<th>Influence</th>
														<th>Reviewed On</th>
														<th>Delete</th>

													</tr>
												</thead>

												<tr th:each="review : ${reviews}">
													<td th:text='${review.get("first_name")}'></td>
													<td th:text='${review.get("email")}'></td>
													<td th:text='${review.get("company_name")}'></td>

													<td><img
														th:src="${review.get('logo')} == null OR ${review.get('logo')} == '' ? @{/serviceicon/smallNoimg.jpg} : ${review.get('logo')}"
														id="showImage" style="width: 50px; height: 50px" /></td>
													<td th:text='${review.get("location")}'></td>
													<td th:text='${review.get("country")}'></td>
													<td
														th:text='${review.get("company_categories").toString()}'></td>
													<td th:text='${review.get("rating")}'></td>
													<td th:text='${review.get("review")}'></td>
													<td th:text='${review.get("review_influences").toString()}'></td>
													<td th:text='${review.get("reviewed_on")}'></td>
													<td><a
														th:href="@{/review/userReviews/delete/}+${{review.get('id')}}"><button
																class="btn red" th:text="Delete"></button></a></td>

												</tr>

											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- END SAMPLE FORM PORTLET-->
					</div>
				</div>
				<!-- END PAGE CONTENT-->
			</div>
		</div>
		<div id="close_div"></div>




	</div>

</body>
</html>