<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="views/master">

<head>
<!-- <script th:src="@{/sid-js/add-multiple.js}" language="javascript"
	type="text/javascript"></script> -->
<script type="text/javascript">
	function readURL(input) {
		if (input.files && input.files[0]) {
			var reader = new FileReader();
			reader.onload = function(e) {
				$('#company-image').attr('src', e.target.result).width(100)
						.height(50);
			};

			reader.readAsDataURL(input.files[0]);
		}
	}
</script>
</head>


<body>


	<div layout:fragment="page-content">

		<div class="container-fluid">
			<!-- BEGIN PAGE CONTENT-->

			<div class="row-fluid errmsg" runat="server" id="dvError"
				visible="false">
				<div style="width: 100%; text-align: center;">
					<div
						th:class="${isError} == 'Yes' ? 'message error2' : 'message success'">
						<p th:text="${message}"></p>
					</div>
				</div>
			</div>
			<!-- <div class="row-fluid errmsg" runat="server" id="dvErrorRed"
				visible="false">
				<div style="width: 100%; text-align: center;">
					<div class="message error2">
						<p></p>
					</div>
				</div>
			</div> -->

			<div class="row-fluid">
				<div class="span12">
					<!-- BEGIN SAMPLE FORM PORTLET-->
					<div class="portlet box blue tabbable">
						<div class="portlet-title">
							<h4>
								<i class="icon-reorder"></i><span class="hidden-480">Add/Edit
									Companies</span>&nbsp;
							</h4>
						</div>
						<div class="portlet-body form">
							<div class="tabbable portlet-tabs">
								<ul class="nav nav-tabs">&nbsp;
								</ul>
								<div class="tab-content">
									<div class="tab-pane active" id="portlet_tab1">
										<!-- BEGIN FORM-->

										<form enctype="multipart/form-data" class="form-horizontal"
											action="#"
											th:action="${action} == 'Save' ? @{/manageCompany/addEditCompany/add} : @{/manageCompany/addEditCompany/editCompany}"
											th:object="${addCompanyDTO}" method="post">

											<div class="control-group"></div>

											<div class="row-fluid">

												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Name</label>
														<div class="controls">
															<input th:field="*{companyId}" type="hidden" /> <input
																th:field="*{companyName}" ID="txtName"
																placeholder="Enter Company Name" class="m-wrap large"
																type="text" /> <label
																th:if="${#fields.hasErrors('companyName')}"
																th:class="'error'" class="col-lg-4 control-label"
																style="color: red;">Name should not be empty.</label>

														</div>
													</div>
												</div>

												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Category</label>
														<div class="controls">

															<select th:field="*{categoryIds}" ID="txtCategoryName"
																class="m-wrap large" multiple="multiple">
																<option th:each="category : ${categories}"
																	th:value="${category.get('id')}"
																	th:text="${category.get('category')}"></option>
															</select> <label th:if="${#fields.hasErrors('categoryIds')}"
																th:class="'error'" class="col-lg-4 control-label"
																style="color: red;">Categories should not be
																empty.</label>

															<p style="color: black; font-weight: bold">Hold Ctrl
																to select multiple.</p>

														</div>

													</div>
												</div>
											</div>


											<div class="row-fluid">

												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Description</label>
														<div class="controls">

															<textarea th:field="*{description}"
																placeholder="Enter Description" ID="txtDescription"
																class="m-wrap large"></textarea>

														</div>
													</div>
												</div>
											</div>


											<div class="row-fluid">
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> FB Page Link</label>
														<div class="controls">

															<input th:field="*{fbPageLink}" style="height: 30px"
																placeholder="Enter FB Page Link" ID="txtFBPageLink"
																class="m-wrap large" />

														</div>
													</div>
												</div>
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Twitter Page Link</label>
														<div class="controls">

															<input th:field="*{twitterPageLink}"
																placeholder="Enter Twitter Page Link"
																style="height: 30px" ID="txtTwitterPageLink"
																class="m-wrap large" />

														</div>
													</div>
												</div>
											</div>


											<div class="row-fluid">
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Contact No.</label>
														<div class="controls">
															<input th:field="*{contactNo}" ID="txtContactNo"
																placeholder="Enter Contact No." style="height: 30px"
																class="m-wrap large" />

														</div>
													</div>
												</div>
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Additional Contact
															No.</label>
														<div class="controls">

															<input th:field="*{additionalContactNo}"
																placeholder="Enter Additional Contact No."
																style="height: 30px" ID="txtContactNo2"
																class="m-wrap large" />

														</div>
													</div>
												</div>
											</div>


											<div class="row-fluid">
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Website</label>
														<div class="controls">
															<input th:field="*{website}" ID="txtWebsite"
																class="m-wrap large" type="text"
																placeholder="Enter Website URL." />

														</div>
													</div>
												</div>
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Email</label>
														<div class="controls">

															<input th:field="*{email}" ID="txtEmail"
																class="m-wrap large" type="text"
																placeholder="Enter Email" />

														</div>
													</div>
												</div>
											</div>

											<div class="row-fluid">
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Location</label>
														<div class="controls">
															<input th:field="*{location}" ID="txtWebsite"
																class="m-wrap large" type="text"
																placeholder="Enter Location" />

														</div>
													</div>
												</div>
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Country</label>
														<div class="controls">

															<input th:field="*{country}" ID="txtEmail"
																class="m-wrap large" type="text"
																placeholder="Enter Country" />

														</div>
													</div>
												</div>
											</div>



											<div class="row-fluid">
												<div class="span6">
													<div class="control-group">
														<label class="control-label"> Company Logo</label>
														<div class="controls">

															<input th:field="*{logo}" onchange="readURL(this);"
																type="file" ID="FULogo" runat="server"
																placeholder="Select company logo" class="m-wrap large"
																accept="image/*" />
															<!--                <%--&nbsp; Size(100x100)--%> -->
															Upload Image (190X190) <label
																th:if="${#fields.hasErrors('logo')}" th:class="'error'"
																th:errors=*{logo} class="col-lg-4 control-label"
																style="color: red;"></label>
														</div>

													</div>
													<div class="control-group">
														<label class="control-label"> </label>
														<div class="controls">
															<div
																style="background-color: #F2EDB8; width: 55px; height: 55px; text-align: center"
																runat="server" id="divShowImage">
																<img th:src="@{/serviceicon/smallNoimg.jpg}"
																	id="company-image" style="width: 50px; height: 50px" />
															</div>
														</div>
													</div>
												</div>

											</div>
											<!-- <div class="control-group">
                                        <label class="control-label">
                                            Show</label>
                                        <div class="controls">
                                            
                                                    <input type="checkbox" ID="chkShowHide" runat="server" Checked="true" />
                                            
                                        </div>
                                    </div> -->
											<div class="form-actions">

												<button id="btnsubmit" class="btn blue okMark" type="submit"
													th:text="${action == 'Edit'} ? 'Edit' : 'Save'"></button>
												<a th:href="@{/manageCompany/addEditCompany}"><button
														type="button" class="btn cancel">Cancel</button></a>
												<!-- <button type="button" ID="btnmulti"  class="add-multiple btn" runat="server" >Add Multiple</button> -->

											</div>
											<br />
											<div id="dvMultiple" runat="server" class="hide">
												<div class="control-group">
													<label class=" textL"> <!-- <b>Country:</b></label> -->
														<label class=" textL"> </label>
												</div>
												<div style="overflow-x: auto; cursor: -moz-grab;">

													<table
														class="table table-striped table-hover table-bordered">
														<tr>
															<th>Category</th>
															<th>Name</th>
															<th>Description</th>
															<th>FB Page Link</th>
															<th>Twitter Page Link</th>
															<th>Google+ Page Link</th>
															<th>Company Logo</th>
														</tr>
														<tr>
															<td><select ID="ddlCategory1" runat="server"
																class="m-wrap medium">
																	<option disabled="" selected="">---Select
																		Category---</option>
															</select></td>
															<td><input ID="txtName1" runat="server"
																class="m-wrap medium" MaxLength="200" /></td>
															<td><input ID="txtDescription1" runat="server"
																class="m-wrap medium" TextMode="MultiLine"
																onKeyUp="Count(this,1000)" onChange="Count(this,1000)" />

															</td>
															<td><input ID="txtFBPageLink1" runat="server"
																class="m-wrap medium" MaxLength="300" /></td>
															<td><input ID="txtTwitterPageLink1" runat="server"
																class="m-wrap medium" MaxLength="300" /></td>
															<td><input ID="txtGooglePlusPageLink1"
																runat="server" class="m-wrap medium" MaxLength="300" />

															</td>
															<td><input type="file" ID="FULogo1" runat="server"
																placeholder="Select company logo" class="m-wrap medium"
																accept="image/*" onchange="return readURL(this);" /></td>
														</tr>
														<tr>
															<td><select ID="ddlCategory2" runat="server"
																class="m-wrap medium">
																	<option disabled="" selected="">---Select
																		Category---</option>
															</select></td>
															<td><input ID="txtName2" runat="server"
																class="m-wrap medium" MaxLength="200" /></td>
															<td><input ID="txtDescription2" runat="server"
																class="m-wrap medium" TextMode="MultiLine"
																onKeyUp="Count(this,1000)" onChange="Count(this,1000)" />

															</td>
															<td><input ID="txtFBPageLink2" runat="server"
																class="m-wrap medium" MaxLength="300" /></td>
															<td><input ID="txtTwitterPageLink2" runat="server"
																class="m-wrap medium" MaxLength="300" /></td>
															<td><input ID="txtGooglePlusPageLink2"
																runat="server" class="m-wrap medium" MaxLength="300" />

															</td>
															<td><input type="file" ID="FULogo2" runat="server"
																placeholder="Select company logo" class="m-wrap medium"
																accept="image/*" onchange="return readURL(this);" /></td>
														</tr>
														<tr>
															<td><select ID="ddlCategory1" runat="server"
																class="m-wrap medium">
																	<option disabled="" selected="">---Select
																		Category---</option>
															</select></td>
															<td><input ID="txtName3" runat="server"
																class="m-wrap medium" MaxLength="200" /></td>
															<td><input ID="txtDescription3" runat="server"
																class="m-wrap medium" TextMode="MultiLine"
																onKeyUp="Count(this,1000)" onChange="Count(this,1000)" />

															</td>
															<td><input ID="txtFBPageLink3" runat="server"
																class="m-wrap medium" MaxLength="300" /></td>
															<td><input ID="txtTwitterPageLink3" runat="server"
																class="m-wrap medium" MaxLength="300" /></td>
															<td><input ID="txtGooglePlusPageLink3"
																runat="server" class="m-wrap medium" MaxLength="300" />

															</td>
															<td><input type="file" ID="FULogo3" runat="server"
																placeholder="Select company logo" class="m-wrap medium"
																accept="image/*" onchange="return readURL(this);" /></td>
														</tr>
													</table>

												</div>
												<div class="form-actions">

													<button ID="btnsavemulti" Text="Save Multiple"
														class="btn blue okMark" runat="server"
														ValidationGroup="validationMulti"
														OnClick="btnsavemulti_Click">Save Multiple</button>
													<button type="button" id="btncancelmulti"
														Text="Cancel Multiple" class="btn cancel" runat="server">Cancel
														Multiple</button>

												</div>
											</div>
										</form>
										<!-- END FORM-->
										<div class="portlet-title">
											<h4>
												<i class="icon-reorder"></i><span class="hidden-480">Search
													Companies</span>&nbsp;
											</h4>
										</div>
										<br />


										<div>

											<form class="form-horizontal" action="#"
												th:action="@{/manageCompany/addEditCompany/searchCompanies}"
												th:object="${companyFilterDTO}" method="GET">

												<select th:field="*{categoryName}" ID="ddlCategorySearch"
													class="m-wrap large">
													<option th:value="${''}" selected="selected">---Select
														Category---</option>

													<option th:each="category : ${categories}"
														th:value="${category.get('category')}"
														th:text="${category.get('category')}"></option>

												</select> <input th:field="*{companyName}" style="height: 30px"
													ID="txtSearch" placeholder="Search Company"
													class="m-wrap medium">

												<button ID="btnSearch" class="btn red cancel" type="submit">Search</button>
												<a th:href="@{/manageCompany/addEditCompany}"><button
														type="button" class="btn cancel">Clear</button></a>
											</form>
											<div style="overflow: auto;">
												<br />



												<!-- Here goes the table -->

												<table style="width: 100%"
													class="table table-striped table-hover table-bordered">

													<thead>
														<tr>

															<th>Name</th>
															<th style="min-width: 80px">Logo</th>
															<th style="min-width: 120px">Category</th>
															<th style="min-width: 120px">Description</th>
															<th style="min-width: 100px">Contact No.</th>
															<!-- <th>Additional Contact No.</th> -->
															<th>Location</th>
															<th>Country</th>
															<th>Email</th>
															<th>Website</th>
															<th>FB Link</th>
															<th>Twitter Link</th>
															<!-- <th>Google+ Link</th> -->
															<th>Edit</th>
															<th>Delete</th>

														</tr>
													</thead>

													<tr th:each="company : ${companies}">
														<td th:text="*{company.get('name')}"></td>
														<td><img
															th:src="*{company.get('logo')} == null OR *{company.get('logo')} == '' ?  @{/serviceicon/smallNoimg.jpg} : *{company.get('logo')}"
															id="showImage" style="width: 50px; height: 50px" /></td>

														<td
															th:text="${company.get('company_categories').toString()}"></td>
														<td th:text="*{company.get('description')}"></td>
														<td th:text="*{company.get('phone_no')}"></td>
														<td th:text="*{company.get('city')}"></td>
														<td th:text="*{company.get('country')}"></td>
														<!-- <td th:text="*{company.get('additional_phone_no')}"></td> -->
														<td th:text="*{company.get('email')}"></td>
														<td th:text="*{company.get('website')}"></td>
														<td th:text="*{company.get('fb_link')}"></td>
														<td th:text="*{company.get('twitter_link')}"></td>



														<td><a
															th:href="@{/manageCompany/addEditCompany/editView/}+${{company.get('id')}}+'/'+${{company.get('name')}}"><button
																	class="btn yellow" type="button" th:text="Edit"></button></a></td>
														<td><a
															th:href="@{/manageCompany/addEditCompany/delete/}+${{company.get('id')}}+'/'+${{company.get('name')}}"><button
																	class="btn red" type="button" th:text="Delete"></button></a></td>

													</tr>

												</table>

											</div>

										</div>
										<div class="form-actions">

											<!-- <button ID="btnUpdateShowHide" Text="Update"
												class="btn cancel blue okMark alignR" runat="server"
												OnClick="btnUpdateShowHide_Click">Update</button> -->
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- END SAMPLE FORM PORTLET-->
					</div>
				</div>
				<!-- END PAGE CONTENT-->
			</div>
		</div>

	</div>

</body>
</html>